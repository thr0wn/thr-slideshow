"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}angular.module("thr-slideshow",[]).directive("thrSlideshow",["$window","$interval","thrSlideshow",function(e,i,n){return{restrict:"E",scope:!0,templateUrl:"thr-slideshow.html",link:function(s,t){function l(){var i=160,n=document.getElementsByClassName("preview-area")[0],s=parseInt(n.offsetWidth/i);return 0===s&&(s=parseInt(e.innerWidth/i)),s>7?7:s<3?2:s}function o(e){document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen||document.msFullscreenElement||s.isMaximized?c():document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||a(e)}function a(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function c(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}s.slideshow=n,s.selectedImg=[],s.thumbnails=[],s.hidePlayIcon=!0,s.isMaximized=!1,s.close=function(){s.hidePlayIcon=!0,s.pause(),s.isMaximized=!1,s.slideshow.hide(),c()},s.$watch("slideshow.visible",function(e){e&&s.slideBox(s.slideshow.photoIndex)}),s.slideBox=function(e){return e<s.selectedIndex?s.directionIsNext=!1:s.directionIsNext=!0,s.selectedIndex=e,s.selectedImg=s.slideshow.photosList[e],s.showPopup=!0,s.thumbnails=r(e),s.play(),!1},s.selectedIndex=s.slideshow.photoIndex,s.playSlide=void 0,s.directionIsNext=!0;var d=0;s.selectedThumbIndex=0;var r=function(e){var i=l();i<e||i===e?d=e-i+1:d>e&&(d=e);for(var n=s.slideshow.photosList.length,t=[],o={},a=d,c=0;c<i&&(o={},a%=n,o.index=a,e===a&&(s.selectedThumbIndex=c),o.photo=s.slideshow.photosList[a],t.push(o),a+=1,n!==c+1);c++);return i=a,t};angular.element(e).bind("resize",function(){s.thumbnails=r(s.selectedIndex),s.$digest()}),angular.element(e).keyup(function(e){switch(e.keyCode){case 27:s.isMaximized?(s.isMaximized=!s.isMaximized,c()):s.close();break;case 39:s.next();break;case 37:s.preview();break;case 80:s.playOrPause()}}),s.next=function(){s.directionIsNext=!0;var e=s.slideshow.photosList.length;s.selectedIndex=(s.selectedIndex+1)%e,s.selectedImg=s.slideshow.photosList[s.selectedIndex],s.thumbnails=r(s.selectedIndex),s.play()},s.preview=function(){s.directionIsNext=!1;var e=s.slideshow.photosList.length;0===s.selectedIndex?s.selectedIndex=e-1:s.selectedIndex-=1,s.selectedImg=s.slideshow.photosList[s.selectedIndex],s.thumbnails=r(s.selectedIndex),s.play()},s.playOrPause=function(){s.hidePlayIcon=!s.hidePlayIcon,s.playSlide?s.pause():s.play()},s.play=function(){s.hidePlayIcon=!0,i.cancel(s.playSlide),s.playSlide=i(function(){s.next()},5e3)},s.pause=function(){s.hidePlayIcon=!1,s.playSlide&&(i.cancel(s.playSlide),s.playSlide=void 0)},s.maximize=function(e){var i=angular.element(e.target).closest(".new-slideBox")[0];o(i),s.isMaximized=!s.isMaximized}}}}]),angular.module("thr-slideshow").run(["$templateCache",function(e){e.put("thr-slideshow.html",'<div ng-if="slideshow.visible">\r\n    <div class="new-slideBox" ng-swipe-left="next()" ng-swipe-right="preview()">\r\n        <a ng-class="{\'icon-resize\':!isMaximized, \'icon-collapse\': isMaximized}" ng-click="maximize($event)">\r\n            <i class="fa" ng-class="{\'fa-expand\':!isMaximized, \'fa-compress\': isMaximized}" aria-hidden="true"></i>\r\n        </a>\r\n        <a class="icon-close" ng-click="close()">\r\n            <i class="fa fa-times" aria-hidden="true"></i>\r\n        </a>\r\n        <div ng-click="close()" class="image-area" ng-class="{maximized : isMaximized, \'only-one\':slideshow.photosList.length === 1}">\r\n            <ul ng-if="slideshow.photosList.length">\r\n                <li ng-repeat="photo in slideshow.photosList" ng-class="{\'next\':directionIsNext,\'preview\':!directionIsNext, selected:$index === selectedIndex, disable:$index !== selectedIndex}">\r\n                    <div ng-class="{\'photo-with-description table-layout\':(photo.description && !isMaximized),\'photo-container\':(!photo.description || isMaximized)}">\r\n                        <div class="photo" ng-class="{\'maximizedPhoto\': isMaximized, \'column-layout\':photo.description && !isMaximized}" >\r\n                            <img  ng-click="playOrPause(); $event.stopPropagation();" ng-src="{{photo.path}}" alt="" />\r\n                            <a  ng-click="playOrPause(); $event.stopPropagation();" class="container-icon-play" ng-hide="hidePlayIcon"><span class="icon-play"></span></a>\r\n                        </div>\r\n                        <div ng-if="photo.description && !isMaximized" class="column-layout description-container">\r\n                            <p class="description">{{photo.description}}</p>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class="preview-area" ng-show="thumbnails.length > 1 && !isMaximized">\r\n            <a class="icon-angle-left" ng-click="preview()">\r\n                <i class="fa fa-angle-left" aria-hidden="true"></i>\r\n            </a>\r\n            <ul>\r\n                <li class="thumbnail-item" ng-repeat="thumb in thumbnails">\r\n                    <div ng-class="{selected:$index === selectedThumbIndex}"  ng-click="slideBox(thumb.index)" >\r\n                        <img class="slideshow-thumbnail"  ng-src="{{thumb.photo.path}}" alt="" />\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <a class="icon-angle-right" ng-click="next()">\r\n                <i class="fa fa-angle-right" aria-hidden="true"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>\r\n')}]);var _createClass=function(){function e(e,i){for(var n=0;n<i.length;n++){var s=i[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(i,n,s){return n&&e(i.prototype,n),s&&e(i,s),i}}();angular.module("thr-slideshow").service("thrSlideshow",function(){function e(){_classCallCheck(this,e),this.visible=!1,this.photosList=[],this.photoIndex=0}return _createClass(e,[{key:"show",value:function(e,i){this.photosList=e,this.photoIndex=i||0,this.visible=!0}},{key:"hide",value:function(){this.visible=!1,this.photosList=[],this.photoIndex=0}}]),e}());